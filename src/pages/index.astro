---
import SidebarLayout from "../layouts/sidebar-layout.astro";
import siteData from "../data/site.json";

type Citation = {
  text: string;
  url: string;
};

const { about, researchInterests, publications, education, workExperience } =
  siteData;
---

<SidebarLayout title={siteData.profile.name}>
  <section class="about">
    <h2><span class="icon">{about.icon}</span> {about.title}</h2>
    <p>
      {about.content}
    </p>
  </section>

  <section class="research-interests">
    <h2>
      <span class="icon">{researchInterests.icon}</span>
      {researchInterests.title}
    </h2>
    {
      researchInterests.areas.map((area) => (
        <div class="research-area">
          <h3>{area.title}</h3>
          <p>{area.description}</p>
        </div>
      ))
    }
  </section>

  <section class="publications">
    <h2><span class="icon">{publications.icon}</span> {publications.title}</h2>

    <div class="publication-category">
      <h3>Journal Papers</h3>
      {
        publications.journalPapers?.map((citation: Citation) => (
          <p class="publication-citation">
            <a
              href={citation.url}
              target="_blank"
              rel="noopener noreferrer"
              set:html={citation.text}
            />
          </p>
        ))
      }
      {
        (!publications.journalPapers ||
          publications.journalPapers.length === 0) && (
          <p class="empty-message">No journal papers yet.</p>
        )
      }
    </div>

    <div class="publication-category">
      <h3>Conference Papers</h3>
      {
        publications.conferencePapers?.map((citation: Citation) => (
          <p class="publication-citation">
            <a
              href={citation.url}
              target="_blank"
              rel="noopener noreferrer"
              set:html={citation.text}
            />
          </p>
        ))
      }
      {
        (!publications.conferencePapers ||
          publications.conferencePapers.length === 0) && (
          <p class="empty-message">No conference papers yet.</p>
        )
      }
    </div>

    <div class="publication-category">
      <h3>Preprints</h3>
      {
        publications.preprints?.map((citation: Citation) => (
          <p class="publication-citation">
            <a
              href={citation.url}
              target="_blank"
              rel="noopener noreferrer"
              set:html={citation.text}
            />
          </p>
        ))
      }
      {
        (!publications.preprints || publications.preprints.length === 0) && (
          <p class="empty-message">No preprints yet.</p>
        )
      }
    </div>
  </section>

  <section class="education">
    <h2><span class="icon">{education.icon}</span> {education.title}</h2>
    {
      education.items.map((item) => (
        <div class="education-item">
          <div class="education-header">
            <span class="date">{item.period}</span>
            <h3>{item.title}</h3>
          </div>
          <p class="education-description">{item.description}</p>
        </div>
      ))
    }
  </section>

  <section class="work-experience">
    <h2>
      <span class="icon">{workExperience.icon}</span>
      {workExperience.title}
    </h2>
    <div class="experience-item">
      {
        workExperience.items.map((item) => (
          <div class="experience-header">
            <span class="date">{item.period}</span>
            <h3>{item.title}</h3>
          </div>
        ))
      }
    </div>
  </section>
</SidebarLayout>

<style>
  section {
    margin: calc(2 * var(--spacing-unit)) 0;
    padding: calc(0.5 * var(--spacing-unit)) var(--spacing-unit);
    background: rgba(255, 255, 255, 0.05);
    border-radius: 8px;
  }

  section:first-child {
    margin-top: 0;
  }

  .post-item,
  .project-item,
  .experience-item,
  .education-item,
  .research-area,
  .publication-item,
  .publication-category {
    margin: calc(1.5 * var(--spacing-unit)) 0;
  }

  .post-title,
  .project-title {
    font-size: calc(1.2 * var(--base-font-size));
    color: #fff;
    text-decoration: none;
    display: block;
    margin-bottom: calc(0.5 * var(--spacing-unit));
  }

  .post-date,
  .project-date {
    font-size: calc(0.8 * var(--base-font-size));
    color: #666;
  }

  .experience-header,
  .education-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: calc(0.5 * var(--spacing-unit));
  }

  .date {
    color: #666;
    font-size: calc(0.9 * var(--base-font-size));
  }

  h2 {
    font-size: calc(1.5 * var(--base-font-size));
    margin: var(--spacing-unit) 0 var(--spacing-unit);
    display: flex;
    align-items: center;
    gap: calc(0.5 * var(--spacing-unit));
  }

  .icon {
    font-size: calc(1.2 * var(--base-font-size));
  }

  .empty-message {
    color: #888;
    font-style: italic;
    padding: 0 0;
  }

  .education-description {
    color: #aaa;
    font-size: calc(0.95 * var(--base-font-size));
    margin-top: calc(0.25 * var(--spacing-unit));
  }

  .research-area h3,
  .publication-item h3 {
    color: #eee;
    font-size: calc(1.1 * var(--base-font-size));
    margin-bottom: calc(0.5 * var(--spacing-unit));
  }

  .publication-citation {
    color: #aaa;
    font-size: calc(0.95 * var(--base-font-size));
    margin-bottom: calc(0.75 * var(--spacing-unit));
    line-height: 1.5;
  }

  .publication-citation a {
    color: #aaa;
    text-decoration: none;
    transition: color 0.2s;
  }

  .publication-citation a:hover {
    color: #fff;
    text-decoration: underline;
  }

  .research-area p {
    color: #aaa;
    font-size: calc(0.95 * var(--base-font-size));
    line-height: 1.5;
  }
</style>
